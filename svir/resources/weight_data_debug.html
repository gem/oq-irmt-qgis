<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="js/jquery-1.9.1.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/jquery-ui.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/d3.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/irmt_viewer_d3_tree.js" charset="utf-8"></script>
    <link type="text/css" rel="stylesheet" href="css/jquery-ui.css">
    <link type="text/css" rel="stylesheet" href="css/irmt_viewer_sub.css">
</head>
<body>

    <div id="projectDefDialog" style="position: absolute; height: 100%; width: 100%;"></div>
    <div id="projectDefWeightDialog" ></div>
    <div id="projectDefNewNodeDialog"></div>
    <div id="warning-no-layer"></div>
    <div id="setNodeNameDialog"></div>

    <script type="text/javascript">
        var qt_page = {
            ACTIVE_LAYER_NUMERIC_FIELDS: "ECOEAC039;ECOEACBEX;ECOEACCDC;ECOEACCPI;ECOEACEXS;ECOEACFCE;ECOEACFDP;ECOEACGCE;ECOEACGFC;ECOEACGGE;ECOEACGNC;ECOEACGRB;ECOEACGRN;ECOEACGS1;ECOEACGUS;ECOEACHEE;ECOEACICR;ECOEACIDA;ECOEACIMP;ECOEACIPD;ECOEACMEP;ECOEACPCM;ECOEACPEE;ECOEACPEP;ECOEACTIN;ECOEACTR1;ECOEACTRA;ECOEACTRE;ECOEACVLE;ECONOMY;ECONOMY_1;ECONOMY_2;ECONOMY_3;ECONOMY_4;ECONOMY_5;EDUCATION;EDUCATIO_1;EDUCATIO_2;EDUCATIO_3;EDUCATIO_4;EDUCATIO_5;EDUEACBGP;EDUEACCPT;EDUEACEEG;EDUEACEPG;EDUEACETG;EDUEACPTP;EDUEACPTS;EDUEACSTG;SVI;SVI_1;SVI_2;SVI_3;SVI_4;SVI_5",
            DEFAULT_OPERATOR: "Weighted sum",
            NODE_TYPES: "RISK_INDICATOR:Risk Indicator;SVI:Social Vulnerability Index;SV_INDICATOR:Social Vulnerability Indicator;SV_THEME:Social Vulnerability Theme;IRI:Integrated Risk Index;RI:Risk Index",
            OPERATORS: "Simple sum (ignore weights);Weighted sum;Average (ignore weights);Simple multiplication (ignore weights);Weighted multiplication;Geometric mean (ignore weights)",
            json_str: '{  "name": "IRI",  "weight": 1.0,  "level": "1.0",  "project_definition_version": "1.0",  "operator": "Weighted sum",  "type": "Integrated Risk Index",  "children": [    {      "type": "Risk Index",      "name": "RI",      "weight": 0.5,      "level": "2.0"    },    {      "name": "SVI",      "weight": 0.5,      "level": "2.0",      "field": "SVI_5",      "operator": "Weighted sum",      "type": "Social Vulnerability Index",      "children": [        {          "name": "Economy",          "weight": 0.5,          "level": "3.0",          "field": "ECONOMY_5",          "operator": "Weighted sum",          "type": "Social Vulnerability Theme",          "children": [            {              "field": "ECOEACBEX",              "type": "Social Vulnerability Indicator",              "name": "Budget expenditures",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACCDC",              "type": "Social Vulnerability Indicator",              "name": "Carbon Dioxide Emissions",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACCPI",              "type": "Social Vulnerability Indicator",              "name": "Consumer price index",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACEXS",              "type": "Social Vulnerability Indicator",              "name": "Exports",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACFCE",              "type": "Social Vulnerability Indicator",              "name": "Final consumption expenditure",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACFDP",              "type": "Social Vulnerability Indicator",              "name": "Foreign direct investment, net inflows",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGCE",              "type": "Social Vulnerability Indicator",              "name": "General government final consumption expenditure",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGFC",              "type": "Social Vulnerability Indicator",              "name": "Gross fixed capital formation",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGGE",              "type": "Social Vulnerability Indicator",              "name": "Greenhouse gas emissions",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGNC",              "type": "Social Vulnerability Indicator",              "name": "GDP Nominal per population",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGRB",              "type": "Social Vulnerability Indicator",              "name": "General government revenue",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGRN",              "type": "Social Vulnerability Indicator",              "name": "GDP Nominal",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGS1",              "type": "Social Vulnerability Indicator",              "name": "Gross savings",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACGUS",              "type": "Social Vulnerability Indicator",              "name": "GNI per capita",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACHEE",              "type": "Social Vulnerability Indicator",              "name": "Net Household final consumption expenditure",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACICR",              "type": "Social Vulnerability Indicator",              "name": "Implied PPP conversion rate",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACIDA",              "type": "Social Vulnerability Indicator",              "name": "Inflation, GDP deflator",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACIMP",              "type": "Social Vulnerability Indicator",              "name": "Imports",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACIPD",              "type": "Social Vulnerability Indicator",              "name": "Income payments (BoP)",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACMEP",              "type": "Social Vulnerability Indicator",              "name": "Military expenditures",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACPCM",              "type": "Social Vulnerability Indicator",              "name": "PPP conversion factor (GDP) to market exchange rate ratio",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACPEE",              "type": "Social Vulnerability Indicator",              "name": "Remittance Inflows",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACPEP",              "type": "Social Vulnerability Indicator",              "name": "Public expenditure on education",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACTIN",              "type": "Social Vulnerability Indicator",              "name": "Total investment",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACTR1",              "type": "Social Vulnerability Indicator",              "name": "International tourism receipts as a percent of total exports",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACTRA",              "type": "Social Vulnerability Indicator",              "name": "Trade",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACTRE",              "type": "Social Vulnerability Indicator",              "name": "International tourism receipts as a percent of GDP",              "weight": 0.03571428571428571,              "level": 4.0            },            {              "field": "ECOEACVLE",              "type": "Social Vulnerability Indicator",              "name": "Value lost due to electrical outages",              "weight": 0.03571428571428571,              "level": 4.0            }          ]        },        {          "name": "Education",          "weight": 0.5,          "level": "3.0",          "field": "EDUCATIO_5",          "operator": "Weighted sum",          "type": "Social Vulnerability Theme",          "children": [            {              "field": "EDUEACBGP",              "type": "Social Vulnerability Indicator",              "name": "Ratio of girls to boys in primary and secondary education",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACCPT",              "type": "Social Vulnerability Indicator",              "name": "Children out of school, primary",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACEEG",              "type": "Social Vulnerability Indicator",              "name": "Education expenditures",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACEPG",              "type": "Social Vulnerability Indicator",              "name": "Gross enrollment ratio, primary",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACETG",              "type": "Social Vulnerability Indicator",              "name": "Gross enrollment ratio, tertiary",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACPTP",              "type": "Social Vulnerability Indicator",              "name": "Pupil-teacher ratio, primary",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACPTS",              "type": "Social Vulnerability Indicator",              "name": "Pupil-teacher ratio, secondary",              "weight": 0.12,              "level": 4.1            },            {              "field": "EDUEACSTG",              "type": "Social Vulnerability Indicator",              "name": "Gross enrollment ratio, secondary",              "weight": 0.12,              "level": 4.1            }          ]        }      ]    }  ]}',
            json_updated: function (updated_json_str) {
                console.log("json_updated signal emitted with the following JSON");
                console.log(updated_json_str)
            },
            DEV_MODE: true
        };
        loadPD(qt_page);
    </script>

</body>
</html>
