# This file contains metadata for your plugin. Beginning
# with version 1.8 this is the preferred way to supply information about a
# plugin. The current method of embedding metadata in __init__.py will
# be supported until version 2.0

# This file should be included when you package your plugin.

# Mandatory items:


[general]
name=OpenQuake Integrated Risk Modelling Toolkit
qgisMinimumVersion=3.0
description=Tools to drive the OpenQuake Engine, to develop composite indicators and integrate them with physical risk estimations, and to predict building recovery times following an earthquake
about=This plugin allows users to drive OpenQuake Engine calculations (https://github.com/gem/oq-engine) of physical hazard and risk, and to load the corresponding outputs as QGIS layers. For those outputs, data visualization tools are provided. The toolkit also enables users to develop composite indicators to measure and quantify social characteristics, and combine them with estimates of human or infrastructure loss. The plugin can interact with the OpenQuake Platform (https://platform.openquake.org), to browse and download socio-economic data or existing projects, edit projects locally in QGIS and upload and share them with the scientific community. A post-earthquake recovery modeling framework is incorporated into the toolkit, to produce building level and/or community level recovery functions.
version=3.5.0
author=GEM Foundation
email=staff.it@globalquakemodel.org

# end of mandatory metadata

# Optional items:

# Uncomment the following line and add your changelog entries:
changelog=
    3.5.0
    * Added loaders for OQ-Engine outputs 'assets' and 'agg_risk'
    * The option to aggregate points by polygons is automatically enabled whenever at least one layer containing polygons becomes available
    * Improved legends and classification criteria, depending on the unique values present in the field used for styling
    3.4.0
    * Whenever an error message is shown to the user, a button in the QGIS message bar allows to display the traceback in a separate window
    * Fixed loader for Aggregate Loss Curves in event based risk OQ-Engine output
    * Tests have been split into: unit tests (using the qgis.testing module); functional tests (running on the official QGIS docker
      without external services); integration tests (running on the official QGIS docker and interacting with a running OQ-Engine
    * When an OQ-Engine output can't be extracted, the error is handled and the full response message is logged
    3.3.0
    * Fixed loader for aggregated Average Asset Losses Statistics OQ-Engine output
    * All calls to the OQ-Engine "extract" API are logged
    * Fixed a bug that caused the log verbosity to be always set to "warning", instead of reading it correctly from user settings 
    3.2.12
    * More stable connection with the OQ-Engine server, preventing issues while reading the console log of a calculation
    3.2.11
    * Added instructions about how to workaround a bug that occurs on macOS while importing matplotlib.pyplot on matplotlib v3.0.0
    * Fixed updating the status of the toolbar button that shows/hides the IRTM Data Viewer
    3.2.10
    * Added the possibility to 'Abort' an OQ-Engine calculation
    3.2.9
    * When saving plugin settings, any dialog driving the oq-engine is reset
    * When the connection with the oq-engine server is lost, the plugin attempts to reconnect 3 times before displaying an error
    * For uniform hazard spectra layers, poe and return_period are saved as customProperties, and they are displayed in UHS plots
    3.2.8
    * Ported to qgis3 the conversion of layer style to the format accepted by Geoserver
    * Fixed a bug loading hazard maps loading one layer per realization or statistic
    3.2.7
    * Updated installation instructions
    3.2.6
    * The loader for hazard maps was updated, fixing compatibility with the OQ-Engine after a change in the output format
    3.2.5
    * Hazard maps can be loaded as one layer per realization/statistic or as multiple layers, per each combination of realization/statistic-imt-poe
    * It is possible to load hazard curves for a selected combination of realization/statistic and intensity measure type
    * Intensity measure levels are casted to float when possible, fixing a plotting issue in hazard curves with IMT=PGV
    * The cursor does not switch to "waiting" while refreshing the OQ-Engine calculation list
    * When feedback is shown outside the dialog that drives the OQ-Engine, a message suggests the user where to look
    3.2.4
    * Added loaders for dmg_by_event and losses_by_event, from csv (disabled for event-based calculations)
    * Outputs of a selected oq-engine calculation are sorted by name in alphabetical order
    3.2.3
    * The button to download a calculation datastore remains disabled until the calculation is complete (and its size is known)
    3.2.2
    * The button to download the datastore of a oq-engine calculation displays the corresponding size
    3.2.1
    * Added the possibility to plot loss curves aggregated by tag in event based risk
    3.2.0
    * Plugin migrated to QGIS3 (with PyQt5, Python3)
    * Removed dialog to aggregate losses by zone (replaced by "Join attributes by location (summary)" algorithm in the processing toolbox)
    * All the aggregations of losses/damages by zone leverage algorithms of the processing toolbox, running as tasks in separate threads
    * When loading OQ-Engine outputs that can be aggregated by zone, if the option to run the aggregation is checked, the ok button is
      disabled until a valid zonal layer is loaded
    * Files produced by the OQ-Engine are downloaded in separate threads, displaying a progress bar while streaming
    3.1.1
    * When loading Ground Motion Fields for scenario calculations, the names of the GMPEs are displayed instead of the realization names
    * When loading a OQ-Engine output as layer, the engine version is saved as a custom property of the layer
    * When exporting data with the Data Viewer, the versions of the OQ-Engine and of the plugin are saved on top of the output file
    * While driving the OQ-Engine, the engine version and the url of the connected engine server are displayed on top of the window
    * Layers loaded from OQ-Engine outputs store as custom properties the versions of the OQ-Engine and of the IRMT plugin
    * The dependency from SAGA was removed (aggregation of points by zone is performed by the plugin, internally)
    3.1.0
    * Ruptures imported from the OQ-Engine can be styled automatically by tectonic region type or by magnitude
    * Improved visualization of aggregate outputs in the Data Viewer
    3.0.2
    * Fixed styling of scenario damage after aggregating damage by zone
    * Fixed selection/deselection of tag values in aggregate losses/damages visualization in the Data Viewer
    3.0.1
    * After aggregating loss/damage by zone, the layer containing points is made invisible
    3.0.0
    * Added loaders for realizations and sourcegroups, from csv
    * Added the loader for Average Asset Losses Statistics and the visualization of aggregated values in the Data Viewer
    * Default styles for layers imported from OQ-Engine outputs depend on the output type
    * When importing damages or losses from the OQ-Engine and aggregating them by zone, only sums are added to the zonal layer,
      and the zonal layer is automatically styled, classifying with respect to the sum of losses/damage
    * Fixed a bug that prevented from loading existing projects from the OpenQuake Platform
    * It is possible to check the connection with the OQ-Platform or with the OQ-Engine from within the plugin settings dialog
    * The visualization of OQ-Engine risk outputs is now described in the user manual
    2.10.0
    * Dialogs embedding OpenQuake web applications (IPT and TaxtWEB) display a progress bar while loading a new page, and there
      is an additional button to reload the homepage. If a page can not be loaded, an error message is displayed.
    * The GUI provides clearer error messages in case the plugin is unable to connect with the OQ Engine WebUI
    2.9.6
    * When loading hazard maps from OQ-Engine, values for all intensity measure types and probabilities of exceedance can be stored
      in a single layer.
    * Layers built from OQ-Engine outputs have the custom property 'calc_id' storing the id of the corresponding OQ-Engine calculation.
    * The names of files exported by the Data Viewer contain the id of the corresponding OQ-Engine calculation.
    2.9.5
    * Several updates to the user manual
    * Fixed bug in the GUI initialization for visualizing aggregate loss curves
    2.9.4
    * Fixed retrieval of the engine server hostname from settings
    2.9.3
    * Hazard maps, hazard curves and uniform hazard spectra are loaded through the "extract" API offered by the OQ Engine Server,
      instead of using the exported npz
    * Fixed the visualization of UHS in case PGA is not present
    * Multiple connection profiles can be saved, making it easier to switch between different OQ-Engine servers and OQ Platforms.
    * It is possible to modify the log verbosity of the plugin, through a new property in the plugin settings
    2.9.2
    * If a selected OQ-Engine calculation is running, the corresponding outputs will be listed as soon as the calculation is complete.
    * Fixed the button showing parameters of a OQ-Engine calculation
    2.9.1
    * Fixed a bug that made impossible to visualize the dialog that drives the OpenQuake Engine
    * Fixed issues importing Qt on macOS
    2.9.0
    * The plugin embeds 3 standalone OpenQuake applications: Input Preparation Toolkit, TaxtWEB and Taxonomy Glossary
    * When a OQ-Engine calculation is removed, the corresponding buttons and its list of outputs are properly cleared.
    * An additional checkbox in the settings enables/disables experimental features
    * Recovery modeling functionalities and the embedded standalone OpenQuake applications are enabled only if experimental
      features are enabled from the plugin settings.
    2.8.1
    * When interacting with the OQ-Engine or the OQ-Platform, the plugin will attempt first to use the default credentials.
      It will open the settings dialog automatically, in case the login fails with the default settings.
    * When a problem causes the widget that drives the OQ-Engine to be closed, error messages are displayed in the general
      QGIS message bar, instead of using the inner message bar of the widget (otherwise, they would not be visible to the user)
    * Fix a bug in the check of layer capabilities, that was working only with QGIS locale set to English
    2.8.0
    * In aggregated loss curves, it is possible to display a chosen set of realizations or statistics (mean, quantiles, etc.)

# tags are comma separated with spaces allowed
tags=GEM, IRMT, SVIR, OpenQuake, Social Vulnerability, Integrated Risk, Recovery, Resilience, Risk, Hazard, Earthquake

homepage=https://plugins.qgis.org/plugins/svir/
tracker=https://github.com/gem/oq-irmt-qgis/issues
repository=https://github.com/gem/oq-irmt-qgis
icon=resources/icon.svg
# experimental flag
experimental=True

# deprecated flag (applies to the whole plugin, not just a single version
deprecated=False

